<html>
<head>
<title>I'm not a good photo editor&#8230</title>
<script type="text/javascript">
var positions = [[532,487.95],
[474,489.95],
[418,485.95],
[359,480.95],
[305,477.95],
[242,474.95],
[185,472.95],
[131,469.95],
[70,463.95],
[16,462.95],
[-13,509.95],
[48,518.95],
[104,521.95],
[158,522.95],
[214,525.95],
[272,527.95],
[332,534.95],
[391,535.95],
[450,536.95],
[505,538.95],
[563,538.95],
[621,543.95],
[676,543.95],
[18,565.95],
[73,570.95],
[131,575.95],
[190,579.95],
[251,578.95],
[300,578.95],
[360,584.95],
[418,588.95],
[477,586.95],
[534,589.95],
[587,590.95],
[648,594.95],
[703.95,596.95],
[-2,611.95],
[50,617.95],
[104,622.95],
[160,629.95], 
[219,629.95],
[274,633.95],
[332,628.95],
[389,634.95],
[447,637.95],
[501,638.95],
[557,641.95],
[613,643.95],
[677,642.95],
[-30,659.95],
[27,666.95],
[81,671.95],
[133,675.95],
[188,678.95],
[245,679.95],
[303,680.95],
[356,673.95],
[411,680.95],
[469,686.95],
[524,686.95],
[581,688.95],
[636,689.95],
[695.95,696.95],
[225,102],
[168,102],
[112,102],
[57,102],
[3,102],
[279,102],
[340,102],
[401,102],
[567,115],
[457,105],
[512,114],
[624,120],
[678,126],
[700.95,77],
[648,70],
[593,66],
[542,62],
[484,58],
[424,53],
[371,50],
[310,51],
[252,51],
[195,50],
[141,50],
[91,54],
[36,51],
[-22,49],
[14,1],
[66,7],
[121,3],
[174,1],
[227,2],
[285,4],
[341,-5],
[400,2],
[454,6],
[515,8],
[571,15],
[629,16],
[684.95,22],
[30,150],
[85,154],
[141,156],
[196,155],
[253,154],
[308,153],
[367,158],
[431,156],
[484,159],
[542,163],
[593,169],
[652,176],
[709.95,178],
[-2,205],
[52,201],
[109,206],
[163,207],
[222,206],
[278,204],
[334,209],
[397,209],
[456,205],
[513,213],
[569,221],
[629,225],
[687,230],
[712.95,282],
[653,280],
[596,272],
[538,270],
[482,269],
[421,264],
[363,263],
[304,263],
[247,258],
[189,259],
[131,261],
[72,253],
[17,252],
[-9,309],
[57,310],
[115,317],
[171,312],
[232,317],
[286,315],
[338,315],
[394,317],
[454,318],
[511,322],
[568,324],
[626,330],
[682,331],
[30,360],
[85,363],
[144,363],
[197,369],
[251,370],
[303,372],
[357,375],
[420,374],
[477,375],
[536,377],
[592,382],
[652,381],
[708.95,383],
[-5,408],
[53,414],
[105,414],
[160,419],
[216,425],
[274,423],
[334,427.95],
[393,430.95],
[452,430.95],
[512,433.95],
[567,436.95],
[625,433.95],
[673,436.95],
[704.95,486.95],
[648,490.95],
[594,488.95]];

var ons = new Array(184);
var ctx;
var canvas;
var mask;
var bubbles;
var under;
var remaining = 184;
var pop;

window.onload = function()
{   
  canvas = document.getElementById('fun');
  document.getElementById('fun').addEventListener("click", clicker, false);
  canvas.height = window.innerHeight;
  canvas.width = window.innerWidth;
  ctx = canvas.getContext('2d');


  bubbles = new Image;
  bubbles.src = "bubble/bubble.JPG";
  bubbles.onload = function() 
  {
  pop = new Audio('bubble/pop.wav');
  mask = new Image;
  mask.src = "bubble/mask.png";
  under = new Image;
  under.src = "bubble/karate.jpg";

  ctx.drawImage(bubbles,0,0);
  ctx.font="50px Helvetica";
  ctx.fillText("Pop all of the bubbles!",(740-490)/2,(750-38)/2);
}
}

function clicker(e)
{
  var x = e.clientX;
  var y = e.clientY;

  canvas.width = canvas.width;

  for (var n = 0; n < 184; n++)
  {
    var xD = positions[n][0]+25 - x;
    var yD = positions[n][1]+25 - y;
    var distance = Math.sqrt(xD*xD + yD*yD);
    if (distance <= 25 && ons[n] != 1)
    {
      pop.play();
      ons[n] = 1;
      remaining--;
    }
    if (ons[n] == 1)
      ctx.drawImage(mask, positions[n][0], positions[n][1]);
  }
  ctx.globalCompositeOperation = 'source-in';
  ctx.drawImage(under, 0, 0);
  ctx.save();
  ctx.globalCompositeOperation = 'destination-over';
  ctx.drawImage(bubbles,0,0);
  ctx.restore();
  if (remaining == 1)
    window.location.href = 'http://youtu.be/J1okpAj7Fhw?t=44s';
}

</script>
</head>

<body>

<canvas id="fun"></canvas>

</body>